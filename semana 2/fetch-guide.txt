Guia passo a passo: implementar `fetch` para JSON Placeholder

Objetivo
- Mostrar como buscar dados da API JSON Placeholder e renderizar na interface já pronta (use os elementos em `index.html`).

Arquivos envolvidos
- index.html (já com elementos): `#items`, `#item-template`, `#loading`, `#error`, `#search`, `#refresh`, `#status`.
- main.js: arquivo onde você vai colar/implementar a lógica do fetch (não modifique o HTML ou CSS aqui).

Visão geral do fluxo
1. Mostrar indicador de carregamento.
2. Fazer `fetch` para a API (ex: https://jsonplaceholder.typicode.com/posts).
3. Converter resposta para JSON e tratar erros de rede/servidor.
4. Renderizar cada item clonando o `template` (`#item-template`) dentro de `#items`.
5. Atualizar mensagens de status, ocultar carregamento e tratar erros.
6. Permitir pesquisa simples e botão de atualizar.

Passo 1 — Selecionar elementos DOM
Exemplo (cole no topo do seu `main.js`):

const itemsEl = document.getElementById('items');
const template = document.getElementById('item-template');
const loadingEl = document.getElementById('loading');
const errorEl = document.getElementById('error');
const searchInput = document.getElementById('search');
const refreshBtn = document.getElementById('refresh');
const statusEl = document.getElementById('status');

Comentários:
- Esses elementos já existem em `index.html`. Usaremos para mostrar/ocultar estados e injetar cards.

Passo 2 — Funções utilitárias de UI
Crie funções simples para manipular a interface:

function showLoading() {
  loadingEl.style.display = 'flex';
}
function hideLoading() {
  loadingEl.style.display = 'none';
}
function showError(message) {
  errorEl.hidden = false;
  errorEl.textContent = message || 'Erro ao carregar os itens.';
}
function hideError() {
  errorEl.hidden = true;
}
function setStatus(text) {
  statusEl.textContent = text || '';
}
function clearItems() {
  itemsEl.innerHTML = '';
}

Passo 3 — Renderizar um item (clonar template)
Use o `<template>` para criar um card por item:

function renderItem(item) {
  const node = template.content.cloneNode(true);
  const title = node.querySelector('.card-title');
  const body = node.querySelector('.card-body');
  const badge = node.querySelector('.badge');

  title.textContent = item.title ?? `Item ${item.id}`;
  body.textContent = item.body ?? '';
  badge.textContent = item.id ?? '';

  itemsEl.appendChild(node);
}

Passo 4 — Função de fetch (com tratamento de erros)
Exemplo completo de `fetchData` que chama a API e usa as utilitárias:

async function fetchData() {
  const url = 'https://jsonplaceholder.typicode.com/posts'; // ou /users, /todos, etc.

  clearItems();
  hideError();
  showLoading();
  setStatus('Carregando...');

  try {
    const resp = await fetch(url);
    if (!resp.ok) throw new Error(`HTTP ${resp.status}`);
    const data = await resp.json();

    // opcional: filtrar ou limitar resultados
    const items = Array.isArray(data) ? data.slice(0, 30) : [data];

    if (items.length === 0) {
      setStatus('Nenhum item encontrado.');
    } else {
      setStatus(`Mostrando ${items.length} itens`);
      items.forEach(renderItem);
    }
  } catch (err) {
    console.error(err);
    showError('Não foi possível carregar os itens. Verifique sua conexão.');
    setStatus('Erro');
  } finally {
    hideLoading();
  }
}

Passo 5 — Integração com pesquisa e botão atualizar
- Para atualizar: chame `fetchData()` ao clicar em `#refresh`.
- Para pesquisar: capture `input` do `#search` e filtre os dados antes de renderizar.

Exemplo simples de integração (assumindo que `fetchData` retorna os dados ou salva em uma variável global):

let cachedItems = [];

async function fetchAndCache() {
  clearItems(); hideError(); showLoading(); setStatus('Carregando...');
  try {
    const resp = await fetch('https://jsonplaceholder.typicode.com/posts');
    if (!resp.ok) throw new Error('Erro na resposta');
    cachedItems = await resp.json();
    renderFromCache();
  } catch (e) {
    showError('Falha ao buscar dados.');
  } finally {
    hideLoading();
  }
}

function renderFromCache() {
  clearItems();
  const q = searchInput.value.trim().toLowerCase();
  const results = q
    ? cachedItems.filter(it => (it.title + ' ' + it.body).toLowerCase().includes(q))
    : cachedItems;
  results.slice(0, 50).forEach(renderItem);
  setStatus(`Mostrando ${results.length} itens`);
}

// eventos
refreshBtn.addEventListener('click', fetchAndCache);
searchInput.addEventListener('input', () => renderFromCache());

Passo 6 — Código de exemplo completo para colar em `main.js`
(cole todo o bloco abaixo no seu `main.js` substituindo qualquer conteúdo anterior)

/* Início do exemplo de main.js */
const itemsEl = document.getElementById('items');
const template = document.getElementById('item-template');
const loadingEl = document.getElementById('loading');
const errorEl = document.getElementById('error');
const searchInput = document.getElementById('search');
const refreshBtn = document.getElementById('refresh');
const statusEl = document.getElementById('status');

function showLoading() { loadingEl.style.display = 'flex'; }
function hideLoading() { loadingEl.style.display = 'none'; }
function showError(message) { errorEl.hidden = false; errorEl.textContent = message || 'Erro ao carregar os itens.'; }
function hideError() { errorEl.hidden = true; }
function setStatus(text) { statusEl.textContent = text || ''; }
function clearItems() { itemsEl.innerHTML = ''; }

function renderItem(item) {
  const node = template.content.cloneNode(true);
  const title = node.querySelector('.card-title');
  const body = node.querySelector('.card-body');
  const badge = node.querySelector('.badge');

  title.textContent = item.title ?? `Item ${item.id}`;
  body.textContent = item.body ?? '';
  badge.textContent = item.id ?? '';

  itemsEl.appendChild(node);
}

let cachedItems = [];

async function fetchAndCache() {
  clearItems(); hideError(); showLoading(); setStatus('Carregando...');
  try {
    const resp = await fetch('https://jsonplaceholder.typicode.com/posts');
    if (!resp.ok) throw new Error(`HTTP ${resp.status}`);
    cachedItems = await resp.json();
    renderFromCache();
  } catch (err) {
    console.error(err);
    showError('Não foi possível carregar os itens.');
    setStatus('Erro');
  } finally {
    hideLoading();
  }
}

function renderFromCache() {
  clearItems();
  const q = searchInput.value.trim().toLowerCase();
  const results = q
    ? cachedItems.filter(it => (it.title + ' ' + it.body).toLowerCase().includes(q))
    : cachedItems;
  results.slice(0, 50).forEach(renderItem);
  setStatus(`Mostrando ${results.length} itens`);
}

// eventos
refreshBtn.addEventListener('click', fetchAndCache);
searchInput.addEventListener('input', () => renderFromCache());

// auto-load ao abrir a página
fetchAndCache();
/* Fim do exemplo de main.js */

Dicas finais e troubleshooting
- CORS: JSON Placeholder permite requests de clientes diretamente; se usar outra API, verifique CORS.
- Network devtools: abra o painel Network do navegador para ver requests e responses.
- Erros no console: sempre verifique `console.error` e mensagens para diagnóstico.
- Limite resultados ao testar (use slice) para evitar renderizar centenas de elementos.

Quer que eu cole esse código em `main.js` para você (eu posso substituir ou criar um backup)?
